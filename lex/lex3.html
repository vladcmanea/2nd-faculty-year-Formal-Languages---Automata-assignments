<html><head><title>LEX</title></head><body style='font-family:"courier new"'><span style='color: #f60'>#include&nbsp;&lt;sys/types.h&gt;</span><br /><span style='color: #f60'>#include&nbsp;&lt;sys/socket.h&gt;</span><br /><span style='color: #f60'>#include&nbsp;&lt;netinet/in.h&gt;</span><br /><br /><span style='color: #060'>/*&nbsp;codul&nbsp;de&nbsp;eroare&nbsp;returnat&nbsp;de&nbsp;anumite&nbsp;apeluri&nbsp;*/</span><br /><span style='color: #009'>extern</span>&nbsp;<span style='color: #009'>int</span>&nbsp;<span style='color: #666'>errno</span><span style='color: #999'>;</span><br /><br /><span style='color: #060'>/*&nbsp;portul&nbsp;de&nbsp;conectare&nbsp;la&nbsp;server*/</span><br /><span style='color: #009'>int</span>&nbsp;<span style='color: #666'>port</span><span style='color: #999'>;</span><br /><br /><span style='color: #009'>int</span>&nbsp;<span style='color: #900'>f1</span><span style='color: #660'>(</span><span style='color: #009'>int</span><span style='color: #999'>,</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><span style='color: #009'>int</span>&nbsp;<span style='color: #900'>f2</span><span style='color: #660'>(</span><span style='color: #009'>int</span>&nbsp;<span style='color: #909'>*</span>&nbsp;<span style='color: #666'>x</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><span style='color: #900'>F</span><span style='color: #660'>(</span><span style='color: #666'>x</span><span style='color: #999'>,</span><span style='color: #666'>y</span><span style='color: #660'>)</span><span style='color: #909'>+</span><span style='color: #900'>G</span><span style='color: #660'>(</span><span style='color: #666'>ch</span><span style='color: #999'>,</span><span style='color: #666'>th</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><span style='color: #900'>H</span><span style='color: #660'>(</span><span style='color: #999'>,</span><span style='color: #999'>,</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><span style='color: #009'>int</span>&nbsp;<span style='color: #900'>max_ab</span><span style='color: #660'>(</span><span style='color: #009'>int</span>&nbsp;<span style='color: #909'>&</span><span style='color: #666'>grt</span><span style='color: #660'>)</span><span style='color: #999'>;</span>&nbsp;<br /><br /><span style='color: #009'>int</span>&nbsp;<span style='color: #900'>max_ab</span><span style='color: #660'>(</span><span style='color: #009'>int</span>&nbsp;<span style='color: #666'>a</span><span style='color: #999'>,</span>&nbsp;<span style='color: #009'>int</span>&nbsp;<span style='color: #666'>b</span><span style='color: #660'>)</span><br /><span style='color: #990'>{</span>&nbsp;<br />&nbsp;<span style='color: #009'>if</span><span style='color: #660'>(</span><span style='color: #666'>a</span><span style='color: #909'>&gt;</span><span style='color: #666'>b</span><span style='color: #660'>)</span>&nbsp;<span style='color: #009'>return</span>&nbsp;<span style='color: #666'>a</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;<span style='color: #009'>return</span>&nbsp;<span style='color: #666'>b</span><span style='color: #999'>;</span><br /><span style='color: #990'>}</span><br /><br /><span style='color: #009'>int</span>&nbsp;<span style='color: #900'>main</span>&nbsp;<span style='color: #660'>(</span><span style='color: #009'>int</span>&nbsp;<span style='color: #666'>argc</span><span style='color: #999'>,</span>&nbsp;<span style='color: #009'>char</span>&nbsp;<span style='color: #909'>*</span><span style='color: #666'>argv</span><span style='color: #909'>[</span><span style='color: #909'>]</span><span style='color: #660'>)</span><br /><span style='color: #990'>{</span><br />&nbsp;&nbsp;<span style='color: #009'>int</span>&nbsp;<span style='color: #666'>sd</span><span style='color: #999'>;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #060'>//&nbsp;descriptorul&nbsp;de&nbsp;socket</span><br />&nbsp;&nbsp;<span style='color: #009'>struct</span>&nbsp;<span style='color: #666'>sockaddr_in</span>&nbsp;<span style='color: #666'>server</span><span style='color: #999'>;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #060'>//&nbsp;structura&nbsp;folosita&nbsp;pentru&nbsp;conectare&nbsp;</span><br />&nbsp;&nbsp;<span style='color: #009'>char</span>&nbsp;<span style='color: #666'>msg</span><span style='color: #909'>[</span><span style='color: #066'>100</span><span style='color: #909'>]</span><span style='color: #999'>;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #060'>//&nbsp;mesajul&nbsp;trimis</span><br />&nbsp;&nbsp;<span style='color: #009'>int</span>&nbsp;<span style='color: #666'>msglen</span><span style='color: #f00'>=</span><span style='color: #066'>0</span><span style='color: #999'>,</span><span style='color: #666'>length</span><span style='color: #f00'>=</span><span style='color: #066'>0</span><span style='color: #999'>;</span><br /><br /><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;exista&nbsp;toate&nbsp;argumentele&nbsp;in&nbsp;linia&nbsp;de&nbsp;comanda?&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #009'>if</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>argc</span>&nbsp;<span style='color: #909'>!=</span>&nbsp;<span style='color: #066'>3</span><span style='color: #660'>)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #900'>printf</span>&nbsp;<span style='color: #660'>(</span><span style='color: #090'>"Sintaxa:&nbsp;%s&nbsp;&lt;adresa_server&gt;&nbsp;&lt;port&gt;\n"</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>argv</span><span style='color: #909'>[</span><span style='color: #066'>0</span><span style='color: #909'>]</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #009'>return</span>&nbsp;<span style='color: #909'>-</span><span style='color: #066'>1</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>}</span><br /><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;stabilim&nbsp;portul&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #666'>port</span>&nbsp;<span style='color: #f00'>=</span>&nbsp;<span style='color: #900'>atoi</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>argv</span><span style='color: #909'>[</span><span style='color: #066'>2</span><span style='color: #909'>]</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;cream&nbsp;socketul&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #009'>if</span>&nbsp;<span style='color: #660'>(</span><span style='color: #660'>(</span><span style='color: #666'>sd</span>&nbsp;<span style='color: #f00'>=</span>&nbsp;<span style='color: #900'>socket</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>AF_INET</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>SOCK_DGRAM</span><span style='color: #999'>,</span>&nbsp;<span style='color: #066'>0</span><span style='color: #660'>)</span><span style='color: #660'>)</span>&nbsp;<span style='color: #909'>==</span>&nbsp;<span style='color: #909'>-</span><span style='color: #066'>1</span><span style='color: #660'>)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #900'>perror</span>&nbsp;<span style='color: #660'>(</span><span style='color: #090'>"Eroare&nbsp;la&nbsp;socket().\n"</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #009'>return</span>&nbsp;<span style='color: #666'>errno</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>}</span><br /><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;umplem&nbsp;structura&nbsp;folosita&nbsp;pentru&nbsp;realizarea&nbsp;dialogului&nbsp;cu&nbsp;serverul&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;familia&nbsp;socket-ului&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #666'>server</span><span style='color: #909'>.</span><span style='color: #666'>sin_family</span>&nbsp;<span style='color: #f00'>=</span>&nbsp;<span style='color: #666'>AF_INET</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;adresa&nbsp;IP&nbsp;a&nbsp;serverului&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #666'>server</span><span style='color: #909'>.</span><span style='color: #666'>sin_addr</span><span style='color: #909'>.</span><span style='color: #666'>s_addr</span>&nbsp;<span style='color: #f00'>=</span>&nbsp;<span style='color: #900'>inet_addr</span><span style='color: #660'>(</span><span style='color: #666'>argv</span><span style='color: #909'>[</span><span style='color: #066'>1</span><span style='color: #909'>]</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;portul&nbsp;de&nbsp;conectare&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #666'>server</span><span style='color: #909'>.</span><span style='color: #666'>sin_port</span>&nbsp;<span style='color: #f00'>=</span>&nbsp;<span style='color: #900'>htons</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>port</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><br /><span style='color: #009'>int</span>&nbsp;<span style='color: #666'>ok</span><span style='color: #f00'>=</span><span style='color: #066'>0</span><span style='color: #999'>;</span><br /><span style='color: #009'>char</span>&nbsp;<span style='color: #666'>ver</span><span style='color: #909'>[</span><span style='color: #066'>10</span><span style='color: #909'>]</span><span style='color: #f00'>=</span><span style='color: #090'>"Stop"</span><span style='color: #999'>;</span><br /><br /><span style='color: #009'>do</span><span style='color: #990'>{</span><br /><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;citirea&nbsp;mesajului&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #900'>bzero</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>msg</span><span style='color: #999'>,</span>&nbsp;<span style='color: #066'>100</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;<span style='color: #900'>printf</span>&nbsp;<span style='color: #660'>(</span><span style='color: #090'>"[client]Introduceti&nbsp;un&nbsp;nume:&nbsp;"</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;<span style='color: #900'>read</span>&nbsp;<span style='color: #660'>(</span><span style='color: #066'>0</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>msg</span><span style='color: #999'>,</span>&nbsp;<span style='color: #066'>100</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;<br />&nbsp;&nbsp;<span style='color: #009'>if</span><span style='color: #660'>(</span><span style='color: #900'>strstr</span><span style='color: #660'>(</span><span style='color: #666'>msg</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>ver</span><span style='color: #660'>)</span><span style='color: #660'>)</span>&nbsp;<span style='color: #666'>ok</span><span style='color: #f00'>=</span><span style='color: #066'>1</span><span style='color: #999'>;</span>&nbsp;<br /><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;trimiterea&nbsp;mesajului&nbsp;la&nbsp;server&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #666'>length</span><span style='color: #f00'>=</span><span style='color: #900'>sizeof</span><span style='color: #660'>(</span><span style='color: #666'>server</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;<span style='color: #009'>if</span>&nbsp;<span style='color: #660'>(</span><span style='color: #900'>sendto</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>sd</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>msg</span><span style='color: #999'>,</span>&nbsp;<span style='color: #066'>100</span><span style='color: #999'>,</span><span style='color: #066'>0</span><span style='color: #999'>,</span>&nbsp;<span style='color: #660'>(</span><span style='color: #009'>struct</span>&nbsp;<span style='color: #666'>sockaddr</span><span style='color: #909'>*</span><span style='color: #660'>)</span><span style='color: #909'>&</span><span style='color: #666'>server</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>length</span><span style='color: #660'>)</span>&nbsp;<span style='color: #909'>&lt;=</span>&nbsp;<span style='color: #066'>0</span><span style='color: #660'>)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #900'>perror</span>&nbsp;<span style='color: #660'>(</span><span style='color: #090'>"[client]Eroare&nbsp;la&nbsp;sendto()&nbsp;spre&nbsp;server.\n"</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #009'>return</span>&nbsp;<span style='color: #666'>errno</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>}</span><br /><br />&nbsp;&nbsp;<span style='color: #009'>if</span>&nbsp;<span style='color: #660'>(</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>msglen</span><span style='color: #f00'>=</span><span style='color: #900'>recvfrom</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>sd</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>msg</span><span style='color: #999'>,</span>&nbsp;<span style='color: #066'>100</span><span style='color: #999'>,</span><span style='color: #066'>0</span><span style='color: #999'>,</span><span style='color: #660'>(</span><span style='color: #009'>struct</span>&nbsp;<span style='color: #666'>sockaddr</span><span style='color: #909'>*</span><span style='color: #660'>)</span><span style='color: #909'>&</span><span style='color: #666'>server</span><span style='color: #999'>,</span>&nbsp;<span style='color: #909'>&</span><span style='color: #666'>length</span><span style='color: #660'>)</span><span style='color: #660'>)</span>&nbsp;<span style='color: #909'>&lt;</span>&nbsp;<span style='color: #066'>0</span><span style='color: #660'>)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #900'>perror</span>&nbsp;<span style='color: #660'>(</span><span style='color: #090'>"[client]Eroare&nbsp;la&nbsp;recvfrom()&nbsp;de&nbsp;la&nbsp;server.\n"</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #009'>return</span>&nbsp;<span style='color: #666'>errno</span><span style='color: #999'>;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style='color: #990'>}</span><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;afisam&nbsp;mesajul&nbsp;primit&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #900'>printf</span>&nbsp;<span style='color: #660'>(</span><span style='color: #090'>"[client]Mesajul&nbsp;primit&nbsp;este:&nbsp;%s\n"</span><span style='color: #999'>,</span>&nbsp;<span style='color: #666'>msg</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><br /><span style='color: #990'>}</span><span style='color: #009'>while</span><span style='color: #660'>(</span><span style='color: #666'>ok</span><span style='color: #909'>==</span><span style='color: #066'>0</span><span style='color: #660'>)</span><span style='color: #999'>;</span>&nbsp;<br /><br />&nbsp;&nbsp;<span style='color: #060'>/*&nbsp;inchidem&nbsp;conexiunea,&nbsp;am&nbsp;terminat&nbsp;*/</span><br />&nbsp;&nbsp;<span style='color: #900'>close</span>&nbsp;<span style='color: #660'>(</span><span style='color: #666'>sd</span><span style='color: #660'>)</span><span style='color: #999'>;</span><br /><span style='color: #990'>}</span><br /><hr /><b>Declaratii de functii</b><hr />int&nbsp;f2(int&nbsp;*&nbsp;x);<br />int&nbsp;max_ab(int&nbsp;&grt);<br /><hr /><b>Definitii de functii (antet)</b><hr />int&nbsp;max_ab(int&nbsp;a,&nbsp;int&nbsp;b)<br /><br />int&nbsp;main&nbsp;(int&nbsp;argc,&nbsp;char&nbsp;*argv[])<br /><br /><hr /><b>Apeluri de functii si de cate ori</b><hr />F o data<br />G o data<br />H o data<br />printf de 3 ori<br />atoi o data<br />socket o data<br />perror de 3 ori<br />inet_addr o data<br />htons o data<br />bzero o data<br />read o data<br />strstr o data<br />sizeof o data<br />sendto o data<br />recvfrom o data<br />close o data<br /><hr /><b>Tipuri predefinite utilizate</b><hr />int<br />char<br /></body></html>